# Basic | 公众号开发

SDK
签名
安全域名
支付目录
服务器
部署流程

授权 - 公众号
支付 - 小程序
分享 - 小程序云

（微信SDK的各种技能）

H5开发
H5接入微信公众号

`微信JS-SDK` - 是开发者在网页上通过JavaScript代码使用微信原生功能的工具包

## 微信授权流程

### 概念

- 业务域名、JS接口安全域名、网页授权域名；

`业务域名` - 
`JS接口安全域名` - 分享到朋友圈时使用；
`网页授权域名` - 用于获取用户针对公众号的唯一标识 openid；

- 开发者工具（添加开发者微信号）、人员设置（添加运营者微信号）；
- 网页授权 access_token 和普通 access_token；

`网页授权 access_token` - 一次性 / 只能获得一个微信用户信息，一对一；
`普通 access_token` - 7200s时间限制 / 有效期内与 openid 一起获取微信用户信息；

> 公众平台以 access_token 为接口调用凭据，来调用接口，所有接口的调用需要先获取 access_token，access_token 在2小时内有效，过期需要重新获取

- UnionID；

`UnionID` - 同一微信开放平台账号下的移动应用、网站应用和公众账号，用户 UnionID 均是一致的；

`OpenID` - 关注者与公众号产生消息交互后，公众号即可获得关注者OpenID，每个用户对每个公众号的OpenID是唯一的，而对于不同公众号，同一用户的OpenID是不同的；

JS-SDK：微信开放出来的功能

授权流程

- 用户同意授权，获取code；
- 通过 code 换取网页授权 access_token；
- 拉取用户信息（需 scope 为 snsapi_userinfo）；

JSSDK 调用流程

- 绑定域名；
- 引入 JS 文件；
- 通过 config 接口注入权限验证配置（接口签名）；
- 通过 ready 接口处理成功验证；


### 微信

1. 公众号
2. 小程序

（公众号和小程序是分开的）

订阅号：每天群发1次 - 折叠；
服务号：每月群发4次，功能更强大 - 好友列表；
企业微信：
小程序：强大、无法脱离微信使用 - 好友列表上方；

公众号90%都是后台的活儿

AppID：应用ID、唯一、不可改、公开也没关系；
AppSecret：应用密码、重要；

Token：校验对方服务器身份、自设、重要；

（Token更新的时候，腾讯的服务器会向自己的服务器发起一条“验证” - 所以应该先配置好自身服务器，再进行平台中的 Token 配置）

EncodingAESKey：随机生成、自身服务器与微信服务器之间交互使用；

---

公众号开发涉及2类服务器：自己的服务器 & 腾讯的服务器

公众号与自己的服务器交互不多（不会直接打交道，小程序才会），自己的服务器与腾讯服务器交互多；

任何人都可以向自己的服务器发起请求，所以需要和腾讯服务器之间有一层验证；

AES 对称加密算法

KOA

access_token - 每次请求所需的验证 token，7200s，有每日次数限制

小程序

功能远强于公众号；
基本：网络、媒体、本地文件
数据：位置、用户数据、设备信息
微信体系：支付、生物识别（指纹）、微信运动、卡券、客服、二维码
社交：微信转发、qq转发

小程序分两层：
app层 - 整个程序共享
page层 - 

小程序 & vue 十分相像

html & wxml
css & wxss
js & js
- & json