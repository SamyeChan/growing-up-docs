<!DOCTYPE html>
<html lang="zh-cn">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">
  <title>8个方向控制</title>
  <style>
  .box {
    width: 200px;
    height: 200px;
    background: orange;
    position: absolute;
    top: 200px;
    left: 200px;
  }
  </style>
</head>
<body>
  <div class="box"></div>
</body>
<script>
/**
 * 想要的效果：控制 div 方向移动（八方向控制）
 * 
 * 37/38/39/40 - 左/上/右/下
 * 
 */
let box = document.querySelector('.box');

/**
 * 4个方向的控制
 */
// document.addEventListener('keydown', function (e) {
//   console.log(e.keyCode);
//   let code = e.keyCode;
//   switch (code) {
//     case 37:
//       box.style.left = parseInt(getComputedStyle(box)['left']) - 10 + 'px';
//       break;
//     case 38:
//       box.style.top = parseInt(getComputedStyle(box)['top']) - 10 + 'px';
//       break;
//     case 39:
//       box.style.left = parseInt(getComputedStyle(box)['left']) + 10 + 'px';
//       break;
//       case 40:
//       box.style.top = parseInt(getComputedStyle(box)['top']) + 10 + 'px';
//   }
// })

/**
 * 8个方向的控制 ====>> 同时有两个按钮被按下
 * 
 * 思路：给每一个方向都设置一个『开关』
 * 实现：通过键盘控制开关，保持现有运动情况是实时监控的
 */
let onOff = {
  toL: false,
  toT: false,
  toR: false,
  toB: false
}
// 定时器
setInterval(function () {
  if (onOff.toL) {
    box.style.left = parseInt(getComputedStyle(box)['left']) - 10 + 'px';
  }
  if (onOff.toT) {
    box.style.top = parseInt(getComputedStyle(box)['top']) - 10 + 'px';
  }
  if (onOff.toR) {
    box.style.left = parseInt(getComputedStyle(box)['left']) + 10 + 'px';
  }
  if (onOff.toB) {
    box.style.top = parseInt(getComputedStyle(box)['top']) + 10 + 'px';
  }
}, 30)

document.addEventListener('keydown', function (e) {
  let code = e.keyCode;
  switch (code) {
    case 37:
      onOff.toL = true;
      break;
    case 38:
      onOff.toT = true;
      break;
    case 39:
      onOff.toR = true;
      break;
    case 40:
      onOff.toB = true;
      break;
  }
})
</script>
</html>